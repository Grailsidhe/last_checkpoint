{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./css/Admin.css\";import Offcanvas from'react-bootstrap/Offcanvas';import{Link}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminLogin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),submit=_useState10[0],setSubmit=_useState10[1];/* Show/Hide password field */var showPw=function showPw(){var pw=document.getElementById(\"pwbox\");pw.type===\"password\"?pw.type=\"text\":pw.type=\"password\";};// let history = useHistory();\n// useEffect(() => {\n//   if (localStorage.getItem(\"authToken\")) {\n//     history.push(\"/admin\");\n//   }\n// }, [history]);\nvar loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};_context.prev=2;_context.next=5;return axios.post(\"/api/auth/login\",{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem(\"authToken\",data.token);setSubmit(true);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setError(_context.t0.response.data.error);setTimeout(function(){setError(\"\");setSubmit(false);},5000);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(submit){return/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"AdminLogin-enter\",children:\"Speak Friend and Enter\"});}else{return error;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"AdminLogin-wrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"pointer\",variant:\"primary\",onClick:handleShow,children:\"Admin\"}),/*#__PURE__*/_jsxs(Offcanvas,{show:show,onHide:handleClose,placement:\"end\",className:\"AdminLogin-page\",children:[/*#__PURE__*/_jsx(Offcanvas.Header,{closeButton:true}),/*#__PURE__*/_jsx(Offcanvas.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"AdminLogin-title\",children:\"Log In\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"AdminLogin-form\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"email\",placeholder:\"email\",onChange:function onChange(e){setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"password\",name:\"password\",id:\"pwbox\",placeholder:\"password\",onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"0px 20px 0 10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"pw-checkbox\",onClick:showPw}),\"\\xA0Show Password\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:loginHandler,children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA0\",handleSubmit(),\"\\xA0\"]})]})})]})]});};","map":{"version":3,"sources":["C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/src/components/AdminLogin.js"],"names":["React","useState","useEffect","axios","Offcanvas","Link","useHistory","AdminLogin","show","setShow","handleClose","handleShow","email","setEmail","password","setPassword","error","setError","submit","setSubmit","showPw","pw","document","getElementById","type","loginHandler","e","preventDefault","config","header","post","data","localStorage","setItem","token","response","setTimeout","handleSubmit","target","value","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./css/Admin.css\";\r\nimport Offcanvas from 'react-bootstrap/Offcanvas';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function AdminLogin() {\r\n    const [show, setShow] = useState(false);\r\n  \r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n  \r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n    const [submit, setSubmit] = useState();\r\n\r\n/* Show/Hide password field */\r\n    const showPw = ()=> {\r\n        const pw = document.getElementById(\"pwbox\");\r\n        pw.type === \"password\" ? pw.type = \"text\" : pw.type = \"password\"\r\n    };\r\n\r\n    // let history = useHistory();\r\n    // useEffect(() => {\r\n    //   if (localStorage.getItem(\"authToken\")) {\r\n    //     history.push(\"/admin\");\r\n    //   }\r\n    // }, [history]);\r\n  \r\n    const loginHandler = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        const config = {\r\n            header: {\r\n            \"Content-Type\": \"application/json\",\r\n            },\r\n        };\r\n    \r\n        try {\r\n            const { data } = await axios.post(\r\n            \"/api/auth/login\",\r\n            { email: email, password: password },\r\n            config\r\n            );\r\n            localStorage.setItem(\"authToken\", data.token);\r\n            setSubmit(true);\r\n        } catch (error) {\r\n            setError(error.response.data.error)\r\n            setTimeout(()=>{\r\n            setError(\"\");\r\n            setSubmit(false);\r\n        }, 5000)\r\n        }\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        if(submit){\r\n            return <Link to=\"/admin\" className=\"AdminLogin-enter\">Speak Friend and Enter</Link>\r\n        } else {\r\n            return error\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"AdminLogin-wrapper\">\r\n            <span className=\"pointer\" variant=\"primary\" onClick={handleShow}>\r\n                Admin\r\n            </span>\r\n    \r\n            <Offcanvas show={show} onHide={handleClose} placement='end' className=\"AdminLogin-page\">\r\n            <Offcanvas.Header closeButton>\r\n            </Offcanvas.Header>\r\n            <Offcanvas.Body>\r\n                <div className=\"Admin-wrapper\">\r\n                <div className=\"AdminLogin-title\">Log In</div>\r\n                    <div className=\"AdminLogin-form\">\r\n                        <input \r\n                            className=\"Admin-input\" \r\n                            type=\"text\"\r\n                            name=\"email\"\r\n                            placeholder=\"email\"\r\n                            onChange={(e) => {\r\n                            setEmail(e.target.value)\r\n                            }}\r\n                        />\r\n                        <input \r\n                            className=\"Admin-input\" \r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            id=\"pwbox\"\r\n                            placeholder=\"password\"\r\n                            onChange={(e) => {\r\n                            setPassword(e.target.value)\r\n                            }}\r\n                        />\r\n                        <span style={{margin: \"0px 20px 0 10px\"}}>\r\n                            <input type=\"checkbox\" className=\"pw-checkbox\" onClick={showPw} />&nbsp;Show Password\r\n                        </span>\r\n                    </div>\r\n                    <button className=\"Admin-button\" onClick={loginHandler}>LOGIN</button>\r\n\r\n                    <p>&nbsp;{handleSubmit()}&nbsp;</p>\r\n\r\n                </div>\r\n            </Offcanvas.Body>\r\n            </Offcanvas>\r\n        </div>\r\n    );\r\n  };"]},"metadata":{},"sourceType":"module"}