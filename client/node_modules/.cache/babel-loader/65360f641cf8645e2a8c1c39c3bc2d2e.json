{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"axios\";import{useHistory}from\"react-router-dom\";import\"./css/Admin.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Admin(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),filterArr=_useState4[0],setFilterArr=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),submit=_useState6[0],setSubmit=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),pId=_useState8[0],setPId=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),pName=_useState10[0],setPName=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),pDate=_useState12[0],setPDate=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),pDescription=_useState14[0],setPDescription=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),pTechs=_useState16[0],setPTechs=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),pPicture=_useState18[0],setPPicture=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),pUrl=_useState20[0],setPUrl=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),privateData=_useState22[0],setPrivateData=_useState22[1];// To block users without login\nuseEffect(function(){var fetchPrivateDate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,_yield$axios$get,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"authToken\"))}};_context.prev=1;_context.next=4;return axios.get(\"/api/private\",config);case 4:_yield$axios$get=_context.sent;_data=_yield$axios$get.data;setPrivateData(_data.data);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);localStorage.removeItem(\"authToken\");setError(\"You are not authorized please login\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchPrivateDate(){return _ref.apply(this,arguments);};}();fetchPrivateDate();},[]);//Logout \nvar history=useHistory();var handleLogout=function handleLogout(){localStorage.removeItem(\"authToken\");history.push(\"/\");};/* Clears forms and states */var clearForm=function clearForm(){var inputs=document.querySelectorAll(\"input,select,textarea\");inputs.forEach(function(item){return item.value=\"\";});setPName(),setPDate(),setPDescription(),setPTechs(),setPPicture(),setPUrl(),setSubmit();};/* Fill chosen object values on input change */useEffect(function(){if(filterArr){setPName(filterArr.name);setPId(filterArr._id);setPDate(filterArr.date);setPDescription(filterArr.description);setPTechs(filterArr.techs);setPPicture(filterArr.picture);setPUrl(filterArr.url);}else{clearForm();}},[filterArr]);// API call\nuseEffect(function(){axios.get(\"http://localhost:5000/api/projects\").then(function(response){return setData(response.data);}).catch(function(error){console.log(error);});},[submit]);/* POST */var handleAdd=function handleAdd(e){e.preventDefault();axios.post(\"/api/projects\",{name:pName,date:pDate,description:pDescription,techs:pTechs,picture:pPicture,url:pUrl}).then(function(res){console.log(res);setSubmit('Success!');setTimeout(function(){return clearForm();},1000);}).catch(function(err){console.log(err);setSubmit('Error!');});};/* PUT */var handleModify=function handleModify(e){e.preventDefault();axios.put(\"/api/projects/\".concat(pId),{name:pName,date:pDate,description:pDescription,techs:pTechs,picture:pPicture,url:pUrl}).then(function(res){console.log(res);setSubmit('Success!');setTimeout(function(){return clearForm();},1000);}).catch(function(err){console.log(err);setSubmit('Error!');});};/* DELETE */var handleDelete=function handleDelete(e){e.preventDefault();axios.delete(\"/api/projects/\".concat(pId)).then(function(res){setSubmit('Success!');setTimeout(function(){return clearForm();},1000);}).catch(function(err){console.log(err);setSubmit('Error!');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"Admin-title\",children:\"Add / Modify / Delete Projects\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-section\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",placeholder:\"Name\",onChange:function onChange(e){setPName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",placeholder:\"Date\",onChange:function onChange(e){setPDate(e.target.value);}})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"Admin-input Admin-textarea\",type:\"text\",name:\"\",placeholder:\"Description\",onChange:function onChange(e){setPDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input Admin-input-long\",type:\"text\",name:\"\",placeholder:\"Technologies used \\u2022\",onChange:function onChange(e){setPTechs(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-section\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",placeholder:\"Cover image URL\",onChange:function onChange(e){setPPicture(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",placeholder:\"http://\",onChange:function onChange(e){setPUrl(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-button-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:handleAdd,children:\"ADD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:clearForm,children:\"CLEAR FORM\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"Admin-submit\",children:[\"\\xA0\",submit,\"\\xA0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-section\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"Admin-select\",type:\"text\",name:\"\",value:pName,onChange:function onChange(e){setFilterArr(data.find(function(type){return type.name===e.target.value;}));console.log(filterArr);setPName(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Choose Project\"}),data&&data.map(function(type,i){return/*#__PURE__*/_jsx(\"option\",{id:type._id,name:\"\",value:type.name,children:type.name},i);}),\";\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",value:pDate,onChange:function onChange(e){setPDate(e.target.value);}})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"Admin-input Admin-textarea\",type:\"text\",name:\"\",value:pDescription,onChange:function onChange(e){setPDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input Admin-input-long\",type:\"text\",name:\"\",value:pTechs,onChange:function onChange(e){setPTechs(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-section\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",value:pPicture,onChange:function onChange(e){setPPicture(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"\",value:pUrl,onChange:function onChange(e){setPUrl(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-button-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:handleModify,children:\"MODIFY\"}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:handleDelete,children:\"DELETE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:clearForm,children:\"CLEAR FORM\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"Admin-submit\",children:[\"\\xA0\",submit,\"\\xA0\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:handleLogout,children:\"LOG OUT\"})]});};","map":{"version":3,"sources":["C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/src/components/Admin.js"],"names":["React","useState","useEffect","axios","useHistory","Admin","data","setData","filterArr","setFilterArr","submit","setSubmit","pId","setPId","pName","setPName","pDate","setPDate","pDescription","setPDescription","pTechs","setPTechs","pPicture","setPPicture","pUrl","setPUrl","privateData","setPrivateData","fetchPrivateDate","config","headers","Authorization","localStorage","getItem","get","removeItem","setError","history","handleLogout","push","clearForm","inputs","document","querySelectorAll","forEach","item","value","name","_id","date","description","techs","picture","url","then","response","catch","error","console","log","handleAdd","e","preventDefault","post","res","setTimeout","err","handleModify","put","handleDelete","delete","target","find","type","map","i"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./css/Admin.css\";\r\n\r\nexport default function Admin() {\r\n\r\n    const [data, setData] = useState();\r\n    const [filterArr, setFilterArr] = useState();\r\n    const [submit, setSubmit] = useState();\r\n    const [pId, setPId] = useState();\r\n    const [pName, setPName] = useState();\r\n    const [pDate, setPDate] = useState();\r\n    const [pDescription, setPDescription] = useState();\r\n    const [pTechs, setPTechs] = useState();\r\n    const [pPicture, setPPicture] = useState();\r\n    const [pUrl, setPUrl] = useState();\r\n\r\n    const [privateData, setPrivateData] = useState(\"\");\r\n\r\n // To block users without login\r\n    useEffect(() => {\r\n        const fetchPrivateDate = async () => {\r\n        const config = {\r\n            headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`,\r\n            },\r\n        };\r\n        try {\r\n            const { data } = await axios.get(\"/api/private\", config);\r\n            setPrivateData(data.data);\r\n        } catch (error) {\r\n            localStorage.removeItem(\"authToken\");\r\n            setError(\"You are not authorized please login\");\r\n        }\r\n    };\r\n    fetchPrivateDate();\r\n  }, []);\r\n\r\n//Logout \r\n    let history = useHistory();\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"authToken\");\r\n        history.push(\"/\");\r\n    }\r\n\r\n    /* Clears forms and states */\r\n    const clearForm = ()=>{\r\n        const inputs = document.querySelectorAll(\"input,select,textarea\");\r\n        inputs.forEach((item) => (item.value = \"\"));\r\n        setPName(), setPDate(), setPDescription(), setPTechs(), setPPicture(), setPUrl(), setSubmit()\r\n    };\r\n\r\n    /* Fill chosen object values on input change */\r\n    useEffect(()=>{ \r\n        if(filterArr){\r\n            setPName(filterArr.name);\r\n            setPId(filterArr._id);\r\n            setPDate(filterArr.date);\r\n            setPDescription(filterArr.description);\r\n            setPTechs(filterArr.techs);\r\n            setPPicture(filterArr.picture);\r\n            setPUrl(filterArr.url)\r\n            } else {\r\n                clearForm()\r\n            }\r\n    }, [filterArr]);\r\n\r\n    // API call\r\n    useEffect(() => {\r\n        axios\r\n            .get(`http://localhost:5000/api/projects`)\r\n            .then((response) => setData(response.data))\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }, [submit]);\r\n\r\n    /* POST */\r\n    const handleAdd = (e)=>{\r\n        e.preventDefault();\r\n        axios.post(`/api/projects`, {name: pName, date: pDate, description: pDescription, techs: pTechs, picture: pPicture, url: pUrl})\r\n        .then((res)=>{\r\n            console.log(res);\r\n            setSubmit('Success!');\r\n            setTimeout(()=> clearForm(), 1000);\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n            setSubmit('Error!');\r\n        })\r\n    };\r\n\r\n    /* PUT */\r\n    const handleModify = (e)=>{\r\n        e.preventDefault();\r\n        axios\r\n        .put(`/api/projects/${pId}`, {name: pName, date: pDate, description: pDescription, techs: pTechs, picture: pPicture, url: pUrl})\r\n        .then((res) => {\r\n            console.log(res);\r\n            setSubmit('Success!');\r\n            setTimeout(()=> clearForm(), 1000);\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n            setSubmit('Error!');\r\n        });\r\n    };\r\n\r\n    /* DELETE */\r\n    const handleDelete = (e)=>{\r\n        e.preventDefault();\r\n        axios\r\n        .delete(\r\n            `/api/projects/${pId}`\r\n        )\r\n        .then((res) => {\r\n            setSubmit('Success!');\r\n            setTimeout(()=> clearForm(), 1000);\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n            setSubmit('Error!');\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"Admin-wrapper\">\r\n        \r\n        <h1 className=\"Admin-title\">Add / Modify / Delete Projects</h1>\r\n\r\n{/* ADD PROJECT */}\r\n        <div className=\"Admin-section\">\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"Name\"\r\n                onChange={(e) => {\r\n                    setPName(e.target.value)\r\n                }}\r\n            />\r\n\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"Date\"\r\n                onChange={(e) => {\r\n                    setPDate(e.target.value)\r\n                }}\r\n            />\r\n        </div>\r\n\r\n            <textarea  \r\n                className=\"Admin-input Admin-textarea\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"Description\"\r\n                onChange={(e) => {\r\n                    setPDescription(e.target.value)\r\n                }}\r\n            />\r\n\r\n            <input \r\n                className=\"Admin-input Admin-input-long\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"Technologies used â€¢\"\r\n                onChange={(e) => {\r\n                    setPTechs(e.target.value)\r\n                }}\r\n            />\r\n\r\n        <div className=\"Admin-section\">\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"Cover image URL\"\r\n                onChange={(e) => {\r\n                    setPPicture(e.target.value)\r\n                }}\r\n            />\r\n\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                placeholder=\"http://\"\r\n                onChange={(e) => {\r\n                    setPUrl(e.target.value)\r\n                }}\r\n            />\r\n        </div>\r\n\r\n            <div className=\"Admin-button-wrapper\">\r\n                <button className=\"Admin-button\" onClick={handleAdd}>ADD</button>\r\n                <button className=\"Admin-button\" onClick={clearForm}>CLEAR FORM</button>\r\n            </div>\r\n\r\n            <p className=\"Admin-submit\">&nbsp;{submit}&nbsp;</p>\r\n\r\n\r\n{/* MODIFY/DELETE PROJECT */}\r\n        <div className=\"Admin-section\">\r\n            <select \r\n                className=\"Admin-select\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pName}\r\n                onChange={(e) => {\r\n                    setFilterArr(data.find((type)=> type.name === e.target.value));\r\n                    console.log(filterArr)\r\n                    setPName(e.target.value)\r\n                }}\r\n            >\r\n                <option>Choose Project</option>\r\n                {data && data.map((type, i) => {\r\n                    return (\r\n                        <option \r\n                        id={type._id} \r\n                        key={i} \r\n                        name=\"\"\r\n                        value={type.name}\r\n                        >\r\n                        {type.name}\r\n                        </option>\r\n                    );\r\n                })};\r\n            </select>\r\n\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pDate}\r\n                onChange={(e) => {\r\n                    setPDate(e.target.value)\r\n                }}\r\n            />\r\n        </div>\r\n\r\n            <textarea \r\n                className=\"Admin-input Admin-textarea\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pDescription}\r\n                onChange={(e) => {\r\n                    setPDescription(e.target.value)\r\n                }}\r\n            />\r\n        \r\n            <input \r\n                className=\"Admin-input Admin-input-long\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pTechs}\r\n                onChange={(e) => {\r\n                    setPTechs(e.target.value)\r\n                }}\r\n            />\r\n\r\n        <div className=\"Admin-section\">\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pPicture}\r\n                onChange={(e) => {\r\n                    setPPicture(e.target.value)\r\n                }}\r\n            />\r\n\r\n            <input \r\n                className=\"Admin-input\" \r\n                type=\"text\"\r\n                name=\"\"\r\n                value={pUrl}\r\n                onChange={(e) => {\r\n                    setPUrl(e.target.value)\r\n                }}\r\n            />\r\n        </div>\r\n\r\n            <div className=\"Admin-button-wrapper\">\r\n                <button className=\"Admin-button\" onClick={handleModify}>MODIFY</button>\r\n                <button className=\"Admin-button\" onClick={handleDelete}>DELETE</button>\r\n                <button className=\"Admin-button\" onClick={clearForm}>CLEAR FORM</button>\r\n            </div>\r\n            \r\n            <p className=\"Admin-submit\">&nbsp;{submit}&nbsp;</p>\r\n            \r\n            <button className=\"Admin-button\" onClick={handleLogout}>LOG OUT</button>\r\n\r\n        </div>\r\n    )\r\n};"]},"metadata":{},"sourceType":"module"}