{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./css/Admin.css\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminLogin(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmpassword=_useState8[0],setConfirmPassword=_useState8[1];/* Show/Hide password field */var showPw=function showPw(){var pw=document.getElementById(\"pwbox\");var pw2=document.getElementById(\"pwbox2\");pw.type===\"password\"?pw.type=\"text\":pw.type=\"password\";pwbox2.type===\"password\"?pw2.type=\"text\":pw2.type=\"password\";};/* Clears forms and states */var clearForm=function clearForm(){var inputs=document.querySelectorAll(\"input,select,textarea\");inputs.forEach(function(item){return item.value=\"\";});setName(),setEmail(),setSubject(),setMessage(),setSubmit();};// AUTH CODE\nvar history=useHistory();// useEffect(() => {\n//   if (localStorage.getItem(\"authToken\")) {\n//     history.push(\"/admin/login\");\n//   }\n// }, [history]);\n/* POST ADMINS */var handledAddAdmins=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-type\":\"application/json\"}};if(!(password!==confirmpassword)){_context.next=7;break;}setPassword(\"\");setConfirmPassword(\"\");setTimeout(function(){setError(\"\");},5000);return _context.abrupt(\"return\",setError(\"Passwords do not match\"));case 7:try{_axios$post=axios.post('http://localhost:5000/api/auth/register',{email:email,password:password},config),data=_axios$post.data;localStorage.setItem(\"authToken\",data.token);setSubmit(success);setTimeout(function(){return clearForm();},1000);}catch(error){setError(error.response.data.error);setTimeout(function(){setError(\"\");},5000);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handledAddAdmins(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"AdminLogin-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"AdminLogin-title\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"AdminLogin-form\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"text\",name:\"email\",placeholder:\"email\",onChange:function onChange(e){setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"password\",name:\"password\",id:\"pwbox\",placeholder:\"password\",onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"Admin-input\",type:\"password\",name:\"confirmpassword\",id:\"pwbox2\",placeholder:\"confirmpassword\",onChange:function onChange(e){setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"0px 20px 0 10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"pw-checkbox\",onClick:showPw}),\"\\xA0Show Password\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Admin-button\",onClick:handledAddAdmins,children:\"REGISTER\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\"Admin\"})]})});};","map":{"version":3,"sources":["C:/Users/FiercePC/desktop/checkpoint/last_checkpoint/client/src/components/Register.js"],"names":["React","useState","useEffect","axios","Link","useHistory","AdminLogin","password","setPassword","error","setError","email","setEmail","confirmpassword","setConfirmPassword","showPw","pw","document","getElementById","pw2","type","pwbox2","clearForm","inputs","querySelectorAll","forEach","item","value","setName","setSubject","setMessage","setSubmit","history","handledAddAdmins","e","preventDefault","config","header","setTimeout","post","data","localStorage","setItem","token","success","response","target","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./css/Admin.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function AdminLogin() {\r\n  \r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n    const [email, setEmail] = useState(\"\");\r\n    const [confirmpassword, setConfirmPassword] = useState(\"\");\r\n\r\n    /* Show/Hide password field */\r\n    const showPw = ()=> {\r\n        const pw = document.getElementById(\"pwbox\");\r\n        const pw2 = document.getElementById(\"pwbox2\");\r\n        pw.type === \"password\" ? pw.type = \"text\" : pw.type = \"password\"\r\n        pwbox2.type === \"password\" ? pw2.type = \"text\" : pw2.type = \"password\"\r\n    };\r\n\r\n    /* Clears forms and states */\r\n    const clearForm = ()=>{\r\n        const inputs = document.querySelectorAll(\"input,select,textarea\");\r\n        inputs.forEach((item) => (item.value = \"\"));\r\n        setName(), setEmail(), setSubject(), setMessage(), setSubmit()\r\n    };\r\n\r\n\r\n// AUTH CODE\r\n    let history = useHistory();\r\n\r\n    // useEffect(() => {\r\n    //   if (localStorage.getItem(\"authToken\")) {\r\n    //     history.push(\"/admin/login\");\r\n    //   }\r\n    // }, [history]);\r\n\r\n\r\n/* POST ADMINS */\r\n    const handledAddAdmins = async (e) =>{\r\n        e.preventDefault();\r\n        const config = {\r\n            header: {\r\n                \"Content-type\": \"application/json\",\r\n            }\r\n        };\r\n        if(password !== confirmpassword){\r\n            setPassword(\"\");\r\n            setConfirmPassword(\"\");\r\n            setTimeout(()=>{\r\n                setError(\"\");\r\n            }, 5000)\r\n            return setError(\"Passwords do not match\")\r\n        }\r\n        try {\r\n            const {data} = axios.post('http://localhost:5000/api/auth/register', {email, password}, config);\r\n            localStorage.setItem(\"authToken\", data.token);\r\n\r\n            setSubmit(success);\r\n            setTimeout(()=> clearForm(), 1000);\r\n            \r\n        } catch (error) {\r\n            setError(error.response.data.error);\r\n            setTimeout(()=>{\r\n                setError(\"\");\r\n            }, 5000)\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"AdminLogin-wrapper\">\r\n            <div className=\"Admin-wrapper\">\r\n                <div className=\"AdminLogin-title\">Register</div>\r\n                <div className=\"AdminLogin-form\">\r\n                    <input \r\n                        className=\"Admin-input\" \r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        placeholder=\"email\"\r\n                        onChange={(e) => {\r\n                        setEmail(e.target.value)\r\n                        }}\r\n                    />\r\n                    <input \r\n                        className=\"Admin-input\" \r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        id=\"pwbox\"\r\n                        placeholder=\"password\"\r\n                        onChange={(e) => {\r\n                        setPassword(e.target.value)\r\n                        }}\r\n                    />\r\n                    <input \r\n                        className=\"Admin-input\" \r\n                        type=\"password\"\r\n                        name=\"confirmpassword\"\r\n                        id=\"pwbox2\"\r\n                        placeholder=\"confirmpassword\"\r\n                        onChange={(e) => {\r\n                        setConfirmPassword(e.target.value)\r\n                        }}\r\n                    />\r\n                    <span style={{margin: \"0px 20px 0 10px\"}}>\r\n                        <input type=\"checkbox\" className=\"pw-checkbox\" onClick={showPw} />&nbsp;Show Password\r\n                    </span>\r\n                </div>\r\n                <button className=\"Admin-button\" onClick={handledAddAdmins}>REGISTER</button>\r\n                <Link to=\"/admin\">Admin</Link>\r\n            </div>\r\n        </div>\r\n    );\r\n  };"]},"metadata":{},"sourceType":"module"}